<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#0a0a0a">
    <title>A Message from Sabbir ‚ù§Ô∏è</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Hind+Siliguri:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* === ULTRA PREMIUM VARIABLES === */
        :root {
            --primary: #ff004c;
            --primary-glow: rgba(255, 0, 76, 0.5);
            --accent: #00e5ff;
            --bg-deep: #050505;
            --glass: rgba(20, 20, 28, 0.85);
            --border: rgba(255, 255, 255, 0.1);
            --text-main: #ffffff;
            --text-sub: #d0d0d0;
            --shadow-card: 0 20px 50px rgba(0,0,0,0.8);
        }

        /* === RESET & CORE === */
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; outline: none; }
        
        body {
            font-family: 'Hind Siliguri', 'Poppins', sans-serif;
            background: var(--bg-deep);
            height: 100vh; width: 100vw; overflow: hidden;
            display: flex; align-items: center; justify-content: center;
            color: var(--text-main);
            perspective: 1200px;
        }

        /* === DYNAMIC BACKGROUND === */
        .bg-gradient {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 120%, #2b0014, #000000);
            z-index: -2;
        }
        #particle-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }

        /* === MODAL SYSTEM (POPUP) === */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.96); backdrop-filter: blur(15px);
            z-index: 9999; display: flex; align-items: center; justify-content: center;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .modal-card {
            background: rgba(30, 30, 45, 0.95);
            border: 1px solid var(--primary);
            box-shadow: 0 0 50px var(--primary-glow);
            padding: 30px 25px; border-radius: 25px;
            text-align: center; width: 85%; max-width: 360px;
            transform: scale(0.9); opacity: 0;
            animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        @keyframes popIn { to { transform: scale(1); opacity: 1; } }

        /* Input Styling */
        .input-group { margin-bottom: 25px; }
        .custom-input {
            width: 100%; padding: 15px; border-radius: 15px;
            background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.2);
            color: white; font-family: inherit; font-size: 1.1rem; text-align: center;
            transition: 0.3s;
        }
        .custom-input:focus { border-color: var(--primary); box-shadow: 0 0 15px var(--primary-glow); }

        /* Gender Selection with Highlight */
        .gender-container {
            display: flex; gap: 15px; justify-content: center; margin-bottom: 30px;
        }
        .gender-btn {
            background: rgba(255,255,255,0.05); padding: 15px 25px; border-radius: 15px;
            cursor: pointer; border: 1px solid rgba(255,255,255,0.1); transition: 0.3s;
            display: flex; flex-direction: column; align-items: center; gap: 8px; width: 45%;
        }
        .gender-btn i { font-size: 1.5rem; color: #aaa; transition: 0.3s; }
        .gender-btn span { font-size: 0.9rem; color: #aaa; font-weight: 500; }
        
        /* Selected State */
        .gender-btn.selected {
            background: rgba(255, 0, 76, 0.2);
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(255, 0, 76, 0.4);
            transform: translateY(-3px);
        }
        .gender-btn.selected i, .gender-btn.selected span { color: #fff; }

        /* === MAIN CARD CONTAINER === */
        .card-wrapper {
            width: 90%; max-width: 420px; min-height: 680px;
            position: relative; z-index: 10;
            transform-style: preserve-3d; transition: transform 0.1s ease-out;
            display: none;
        }

        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px);
            border: 1px solid var(--border); border-radius: 40px;
            padding: 30px 20px; height: 100%; width: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            box-shadow: var(--shadow-card); position: relative; overflow: hidden;
        }

        /* === PROGRESS BAR === */
        .progress-bar {
            position: absolute; top: 0; left: 0; width: 0%; height: 5px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            transition: width 0.6s ease; box-shadow: 0 0 15px var(--primary);
        }

        /* === STEPS === */
        .step {
            display: none; width: 100%; flex-direction: column; align-items: center; text-align: center;
            animation: slideUpFade 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
            padding-bottom: 60px; /* Space for waves */
        }
        .step.active { display: flex; }
        
        @keyframes slideUpFade { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }

        /* === TYPOGRAPHY & ICONS === */
        h1.hero { font-family: 'Great Vibes', cursive; font-size: 3.5rem; color: var(--primary); text-shadow: 0 0 25px var(--primary-glow); margin: 5px 0; line-height: 1.2; }
        h2 { font-size: 1.6rem; font-weight: 700; color: #fff; margin-bottom: 12px; }
        p.text { font-size: 1.1rem; line-height: 1.7; color: var(--text-sub); margin-bottom: 25px; font-weight: 300; }
        .dynamic-name { color: var(--accent); font-weight: 700; }

        .icon-circle {
            width: 95px; height: 95px; border-radius: 50%;
            background: linear-gradient(135deg, #1e1e2d, #12121a);
            border: 2px solid rgba(255,255,255,0.08);
            display: flex; align-items: center; justify-content: center;
            font-size: 2.2rem; color: var(--accent); margin-bottom: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.6); position: relative;
        }
        .icon-circle::after {
            content: ''; position: absolute; inset: -5px; border-radius: 50%;
            border: 2px solid var(--primary); opacity: 0.4; animation: pulseRing 2s infinite;
        }
        @keyframes pulseRing { 0% { transform: scale(1); opacity: 0.6; } 100% { transform: scale(1.5); opacity: 0; } }

        /* === BUTTONS === */
        .btn {
            background: linear-gradient(90deg, var(--primary), #ff2e63);
            color: white; border: none; padding: 16px 35px; border-radius: 50px;
            font-size: 1.1rem; font-weight: 600; cursor: pointer;
            box-shadow: 0 8px 30px var(--primary-glow); transition: all 0.3s;
            width: 100%; max-width: 260px; display: flex; align-items: center; justify-content: center; gap: 10px;
            position: relative; overflow: hidden;
        }
        .btn:active { transform: scale(0.96); }
        .btn-outline { background: transparent; border: 1px solid rgba(255,255,255,0.3); box-shadow: none; }

        /* === TYPING EFFECT === */
        .typing-box {
            background: rgba(255,255,255,0.04); border-radius: 15px; padding: 25px;
            width: 100%; text-align: left; min-height: 150px;
            border-left: 4px solid var(--primary); margin-bottom: 25px;
            color: #eee; position: relative; font-style: italic; line-height: 1.8;
        }
        .cursor { display: inline-block; width: 3px; height: 1.2em; background: var(--primary); animation: blink 1s infinite; vertical-align: sub; }
        @keyframes blink { 50% { opacity: 0; } }

        /* === AUDIO VISUALIZER (WAVES) === */
        .visualizer-container {
            position: absolute; bottom: 25px; width: 100%; height: 40px;
            display: flex; justify-content: center; align-items: flex-end; gap: 6px;
            opacity: 0; transition: opacity 1s; pointer-events: none;
        }
        .wave {
            width: 6px; background: var(--primary); border-radius: 6px;
            animation: waveAnim 1s ease-in-out infinite;
        }
        .wave:nth-child(even) { background: var(--accent); animation-duration: 1.2s; }
        .wave:nth-child(3n) { animation-duration: 0.8s; }
        @keyframes waveAnim { 0%, 100% { height: 6px; } 50% { height: 40px; } }

        .hidden { display: none !important; }

    </style>
</head>
<body>

    <audio id="bg-music" loop>
        <source src="https://www.dropbox.com/scl/fi/7zp3erxigk8gm04gyf4dq/my-love.mp3?rlkey=qkv50399rj0x9icysd3lq5i1t&st=53h3cf0h&dl=1" type="audio/mp3">
    </audio>

    <div class="bg-gradient"></div>
    <canvas id="particle-canvas"></canvas>

    <div class="modal-overlay" id="identity-modal">
        <div class="modal-card">
            <div class="icon-circle" style="width: 80px; height: 80px; margin: 0 auto 20px auto; font-size: 2rem;">
                <i class="fa-solid fa-heart"></i>
            </div>
            <h2 style="margin-bottom: 20px;">‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶ö‡ßü?</h2>
            
            <div class="input-group">
                <input type="text" id="user-name" class="custom-input" placeholder="‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ... (‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ/English)">
            </div>
            
            <div class="gender-container">
                <div class="gender-btn" onclick="selectGender('male', this)">
                    <i class="fa-solid fa-mars"></i>
                    <span>‡¶õ‡ßá‡¶≤‡ßá</span>
                </div>
                <div class="gender-btn" onclick="selectGender('female', this)">
                    <i class="fa-solid fa-venus"></i>
                    <span>‡¶Æ‡ßá‡ßü‡ßá</span>
                </div>
            </div>

            <button class="btn" onclick="checkIdentity()">‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶ß‡¶æ‡¶™ <i class="fa-solid fa-arrow-right"></i></button>
        </div>
    </div>

    <div class="modal-overlay hidden" id="music-modal">
        <div class="modal-card">
            <div style="font-size: 3.5rem; margin-bottom: 10px;">üëãüèª</div>
            <h3 style="margin-bottom: 10px; color:#fff;">Hey <span class="dynamic-name" style="color:var(--primary)"></span></h3>
            <p style="color: #bbb; margin-bottom: 25px;">‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø<br>‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶ï‡ßÄ ‡¶ó‡¶æ‡¶® ‡¶∂‡ßÅ‡¶®‡¶§‡ßá ‡¶ö‡¶æ‡¶ì?</p>
            <div style="display: flex; gap: 15px; justify-content: center;">
                <button class="btn" style="width: auto;" onclick="startJourney(true)">‡¶π‡ßç‡¶Ø‡¶æ‡¶Å ‚ù§Ô∏è</button>
                <button class="btn btn-outline" style="width: auto;" onclick="startJourney(false)">‡¶®‡¶æ üò∂</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay hidden" id="friend-modal">
        <div class="modal-card">
            <div style="font-size: 4rem; color: #ff9800; margin-bottom: 15px;">
                <i class="fa-solid fa-handshake-simple"></i>
            </div>
            <h2 style="color: #ff9800;">‡¶π‡¶æ‡¶á ‡¶¨‡ßç‡¶∞‡ßã! ‡¶Ü‡¶Æ‡¶ø ‡¶∏‡¶æ‡¶¨‡ßç‡¶¨‡¶ø‡¶∞ </h2>
            <p style="margin-top: 10px;">‡¶™‡ßç‡¶∞‡¶ø‡ßü <span class="dynamic-name"></span>,<br>
            ‡¶è‡¶á ‡¶™‡ßç‡¶∞‡¶™‡ßã‡¶ú‡¶æ‡¶≤‡¶ü‡¶ø ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶∏‡ßç‡¶™‡ßá‡¶∂‡¶æ‡¶≤ ‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑‡¶ü‡¶ø‡¶∞ (‡¶Æ‡ßá‡ßü‡ßá‡¶¶‡ßá‡¶∞) ‡¶ú‡¶®‡ßç‡¶Ø ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§<br><br>
            ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∞‡¶á‡¶≤‡ßã ‡¶Ö‡¶´‡ßÅ‡¶∞‡¶®‡ßç‡¶§ ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶§‡ßç‡¶¨! ‡¶≠‡¶æ‡¶≤‡ßã ‡¶•‡ßá‡¶ï‡ßã‡•§ üòÇ</p>
        </div>
    </div>

    <div class="card-wrapper" id="main-interface">
        <div class="glass-card">
            <div class="progress-bar" id="progress"></div>

            <div id="step-1" class="step active">
                <div class="icon-circle"><i class="fa-solid fa-envelope-open-text"></i></div>
                <h2 style="color: var(--accent);">‡¶π‡¶æ‡¶á! ‡¶Ü‡¶Æ‡¶ø ‡¶∏‡¶æ‡¶¨‡ßç‡¶¨‡¶ø‡¶∞ üëã</h2>
                <h1 class="hero">Dear <span class="dynamic-name"></span></h1>
                <p class="text">
                    ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶è‡¶á ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§‡¶ü‡¶æ ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§<br>
                    ‡¶§‡ßã‡¶Æ‡¶æ‡¶ï‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶®‡¶æ ‡¶¨‡¶≤‡¶æ ‡¶ï‡¶•‡¶æ ‡¶ú‡¶æ‡¶®‡¶æ‡¶§‡ßá ‡¶ö‡¶æ‡¶á‡•§<br>
                    ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶π‡ßÉ‡¶¶‡ßü‡ßá‡¶∞ ‡¶ñ‡ßÅ‡¶¨ ‡¶ï‡¶æ‡¶õ‡ßá‡¶∞ ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶Ö‡¶®‡ßÅ‡¶≠‡ßÇ‡¶§‡¶ø‡•§
                </p>
                <button class="btn" onclick="nextStep(2)">‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶ø <i class="fa-solid fa-arrow-right"></i></button>
            </div>

            <div id="step-2" class="step">
                <div class="icon-circle" style="border-color: #666;"><i class="fa-solid fa-clock-rotate-left" style="color:#aaa;"></i></div>
                <h2>‡¶Ö‡¶§‡ßÄ‡¶§‡ßá‡¶∞ ‡¶Ü‡¶Æ‡¶ø</h2>
                <p class="text">
                    ‡¶§‡ßã‡¶Æ‡¶æ‡¶ï‡ßá ‡¶ö‡ßá‡¶®‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßÉ‡¶•‡¶ø‡¶¨‡ßÄ‡¶ü‡¶æ<br>
                    ‡¶ñ‡ßÅ‡¶¨ ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶Ü‡¶∞ ‡¶∞‡¶ô‡¶π‡ßÄ‡¶® ‡¶õ‡¶ø‡¶≤‡•§<br>
                    ‡¶Ü‡¶Æ‡¶ø ‡¶ú‡¶æ‡¶®‡¶§‡¶æ‡¶Æ ‡¶®‡¶æ ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§
                </p>
                <button class="btn" onclick="nextStep(3)">‡¶§‡¶æ‡¶∞‡¶™‡¶∞? <i class="fa-solid fa-chevron-down"></i></button>
            </div>

            <div id="step-3" class="step">
                <div class="icon-circle"><i class="fa-solid fa-wand-magic-sparkles"></i></div>
                <h2>‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶Ü‡¶ó‡¶Æ‡¶®</h2>
                <p class="text">
                    ‡¶π‡¶†‡¶æ‡ßé ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶è‡¶≤‡ßá, ‡¶Ü‡¶∞ ‡¶∏‡¶¨ ‡¶¨‡¶¶‡¶≤‡ßá ‡¶ó‡ßá‡¶≤‡ßã‡•§<br>
                    ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ì‡¶á ‡¶Æ‡¶æ‡ßü‡¶æ‡¶¨‡ßÄ ‡¶ö‡ßã‡¶ñ‡ßá‡¶∞ ‡¶¶‡¶ø‡¶ï‡ßá ‡¶§‡¶æ‡¶ï‡¶ø‡ßü‡ßá<br>
                    ‡¶Ü‡¶Æ‡¶ø <span style="color:var(--accent); font-weight:600;">‡¶¨‡ßá‡¶Å‡¶ö‡ßá ‡¶•‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶Æ‡¶æ‡¶®‡ßá</span> ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶™‡ßá‡¶≤‡¶æ‡¶Æ‡•§
                </p>
                <button class="btn" onclick="nextStep(4)">‡¶Æ‡ßÅ‡¶ó‡ßç‡¶ß‡¶§‡¶æ... <i class="fa-solid fa-heart"></i></button>
            </div>

            <div id="step-4" class="step">
                <div class="icon-circle"><i class="fa-regular fa-face-smile-beam"></i></div>
                <h2>‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶π‡¶æ‡¶∏‡¶ø</h2>
                <p class="text">
                    ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶π‡¶æ‡¶∏‡¶ø‡¶ü‡¶æ ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶∏‡¶¨ ‡¶ï‡ßç‡¶≤‡¶æ‡¶®‡ßç‡¶§‡¶ø ‡¶¶‡ßÇ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡ßü‡•§<br>
                    ‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶æ‡¶∏ ‡¶ï‡¶∞‡ßã <span class="dynamic-name"></span>,<br>
                    ‡¶§‡ßã‡¶Æ‡¶æ‡¶ï‡ßá ‡¶¶‡ßá‡¶ñ‡¶≤‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶π‡ßÉ‡¶¶‡¶∏‡ßç‡¶™‡¶®‡ßç‡¶¶‡¶® ‡¶¨‡ßá‡ßú‡ßá ‡¶Ø‡¶æ‡ßü‡•§
                </p>
                <button class="btn" onclick="nextStep(5)">‡¶ó‡ßã‡¶™‡¶® ‡¶ï‡¶•‡¶æ <i class="fa-solid fa-user-secret"></i></button>
            </div>

            <div id="step-5" class="step">
                <div class="icon-circle" style="width: 70px; height: 70px; font-size: 1.8rem; margin-bottom: 15px;"><i class="fa-solid fa-pen-nib"></i></div>
                <div class="typing-box"><span id="type-text"></span><span class="cursor"></span></div>
                <button class="btn" id="reveal-btn" onclick="nextStep(6)" style="opacity: 0; pointer-events: none;">‡¶™‡¶∞‡ßá‡¶∞ ‡¶ß‡¶æ‡¶™‡ßá <i class="fa-solid fa-arrow-right"></i></button>
            </div>

            <div id="step-6" class="step">
                <div class="icon-circle"><i class="fa-solid fa-shield-heart"></i></div>
                <h2>‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ú‡ßç‡¶û‡¶æ</h2>
                <p class="text">
                    ‡¶Ü‡¶Æ‡¶ø ‡¶§‡ßã‡¶Æ‡¶æ‡¶ï‡ßá ‡¶ö‡¶æ‡¶Å‡¶¶‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∂‡ßç‡¶∞‡ßÅ‡¶§‡¶ø ‡¶¶‡ßá‡¶¨‡ßã ‡¶®‡¶æ,<br>
                    ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶Ü‡¶Æ‡¶ø ‡¶∏‡¶æ‡¶¨‡ßç‡¶¨‡¶ø‡¶∞ ‡¶ï‡¶•‡¶æ ‡¶¶‡¶ø‡¶ö‡ßç‡¶õ‡¶ø ‚Äî<br>
                    ‡¶Ö‡¶®‡ßç‡¶ß‡¶ï‡¶æ‡¶∞‡ßá ‡¶Ü‡¶Æ‡¶ø ‡¶∏‡¶¨‡¶∏‡¶Æ‡ßü ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶õ‡¶æ‡ßü‡¶æ ‡¶π‡ßü‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßã‡•§
                </p>
                <button class="btn" onclick="nextStep(7)">‡¶∂‡ßá‡¶∑ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® <i class="fa-solid fa-ring"></i></button>
            </div>

            <div id="step-7" class="step">
                <div style="font-size: 5rem; color: var(--primary); margin-bottom: 20px; animation: heartbeat 1.2s infinite;">
                    <i class="fa-duotone fa-ring-diamond"></i>
                </div>
                <h1 class="hero" style="font-size: 2.2rem; margin-bottom: 20px;">Will You Be Mine?</h1>
                <p class="text">
                    <span class="dynamic-name"></span>, ‡¶∏‡¶æ‡¶∞‡¶æ‡¶ú‡ßÄ‡¶¨‡¶® ‡¶ï‡¶ø ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶π‡¶æ‡¶§‡¶ü‡¶æ ‡¶ß‡¶∞‡ßá<br>
                    ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶∏‡ßÅ‡¶ñ-‡¶¶‡ßÅ‡¶É‡¶ñ‡ßá‡¶∞ ‡¶≠‡¶æ‡¶ó‡ßÄ‡¶¶‡¶æ‡¶∞ ‡¶π‡¶¨‡ßá? üíç
                </p>
                <div style="position: relative; width: 100%; height: 110px; display: flex; justify-content: center; gap: 15px;">
                    <button class="btn" style="width: 45%; height: 55px; z-index: 5;" onclick="handleYes()">Yes! üíñ</button>
                    <button class="btn btn-outline" id="no-btn" style="width: 45%; height: 55px; background: rgba(255,255,255,0.1); position: absolute; right: 10px;">No üòú</button>
                </div>
            </div>

            <div id="step-8" class="step">
                <div class="icon-circle" style="background: #ff0050; border-color: #fff; width: 110px; height: 110px;">
                    <i class="fa-solid fa-heart" style="color: #fff; animation: pulse 1s infinite;"></i>
                </div>
                <h1 class="hero" style="font-size: 3.5rem; margin-top: 10px;">I Love You!</h1>
                <p class="text">
                    ‡¶Ü‡¶≤‡¶π‡¶æ‡¶Æ‡¶¶‡ßÅ‡¶≤‡¶ø‡¶≤‡ßç‡¶≤‡¶æ‡¶π! ‡¶Ü‡¶ú ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶®‡ßá‡¶∞ ‡¶∏‡ßá‡¶∞‡¶æ ‡¶¶‡¶ø‡¶®‡•§<br>
                    ‡¶Ü‡¶Æ‡¶ø ‡¶§‡ßã‡¶Æ‡¶æ‡¶ï‡ßá ‡¶Ö‡¶®‡ßá‡¶ï ‡¶≠‡¶æ‡¶≤‡ßã‡¶¨‡¶æ‡¶∏‡¶ø <span class="dynamic-name"></span>‡•§<br>
                    ‡¶∏‡¶æ‡¶∞‡¶æ‡¶ú‡ßÄ‡¶¨‡¶® ‡¶™‡¶æ‡¶∂‡ßá ‡¶•‡ßá‡¶ï‡ßã‡•§ ‚ù§Ô∏è
                </p>
                <button class="btn" style="background: #25D366;" onclick="sendWhatsApp()">‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶æ‡¶†‡¶æ‡¶ì <i class="fa-brands fa-whatsapp"></i></button>
            </div>

            <div class="visualizer-container" id="visualizer">
                <div class="wave"></div><div class="wave"></div><div class="wave"></div><div class="wave"></div>
                <div class="wave"></div><div class="wave"></div><div class="wave"></div><div class="wave"></div>
            </div>
        </div>
    </div>

    <script>
        // === GLOBAL STATE ===
        let userData = { name: "", gender: "" };
        const CONFIG = { whatsapp: "+8801763-505829" }; // Sabbir's Number

        // === 1. SELECTION LOGIC (HIGHLIGHT) ===
        function selectGender(gender, element) {
            // Remove 'selected' class from all buttons
            document.querySelectorAll('.gender-btn').forEach(btn => btn.classList.remove('selected'));
            // Add 'selected' class to clicked button
            element.classList.add('selected');
            // Set data
            userData.gender = gender;
            triggerHaptic(20);
        }

        function checkIdentity() {
            const nameInput = document.getElementById("user-name").value.trim();
            
            if(!nameInput) {
                alert("‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ!");
                return;
            }
            if(!userData.gender) {
                alert("‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶õ‡ßá‡¶≤‡ßá ‡¶¨‡¶æ ‡¶Æ‡ßá‡ßü‡ßá ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßã!");
                return;
            }

            userData.name = nameInput;

            // Update Dynamic Name Placeholders
            document.querySelectorAll(".dynamic-name").forEach(el => el.innerText = userData.name);
            
            triggerHaptic(40);
            
            // Fade out modal
            const modal = document.getElementById("identity-modal");
            modal.style.opacity = '0';
            setTimeout(() => {
                modal.classList.add("hidden");
                
                // Gender Branching Logic
                if(userData.gender === "male") {
                    document.getElementById("friend-modal").classList.remove("hidden");
                } else {
                    document.getElementById("music-modal").classList.remove("hidden");
                }
            }, 500);
        }

        // === 2. START JOURNEY ===
        function startJourney(playMusic) {
            triggerHaptic(50);
            document.getElementById("music-modal").classList.add("hidden");
            
            const mainUI = document.getElementById("main-interface");
            mainUI.style.display = "block";
            
            // Audio & Visualizer Setup
            const audio = document.getElementById("bg-music");
            const visualizer = document.getElementById("visualizer");

            if(playMusic) {
                audio.volume = 0.5;
                audio.play().then(() => {
                    visualizer.style.opacity = "0.8"; // Show visualizer only if music plays
                }).catch(err => console.log("Audio Blocked"));
            }

            updateProgress(1);
        }

        // === 3. NAVIGATION ENGINE ===
        function nextStep(step) {
            triggerHaptic(30);

            const current = document.querySelector(".step.active");
            current.style.opacity = "0";
            current.style.transform = "translateY(-20px)";

            setTimeout(() => {
                current.classList.remove("active");
                
                const next = document.getElementById(`step-${step}`);
                next.classList.add("active");
                next.style.animation = "none";
                next.offsetHeight; // trigger reflow
                next.style.animation = "slideUpFade 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards";

                updateProgress(step);

                // Specific Triggers
                if(step === 5) startTyping();
                if(step === 7) initSmartButton();
                if(step === 8) startCelebration();
            }, 400);
        }

        function updateProgress(step) {
            const percent = ((step - 1) / 7) * 100;
            document.getElementById("progress").style.width = `${percent}%`;
        }

        // === 4. REALISTIC TYPING AI ===
        function startTyping() {
            const container = document.getElementById("type-text");
            const btn = document.getElementById("reveal-btn");
            // Romantic Message with "Shan" logic
            const msg = `‡¶Ü‡¶Æ‡¶ø ‡¶ó‡ßÅ‡¶õ‡¶ø‡ßü‡ßá ‡¶ï‡¶•‡¶æ ‡¶¨‡¶≤‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶ø ‡¶®‡¶æ‡•§ ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶è‡¶ü‡¶æ ‡¶ú‡¶æ‡¶®‡¶ø, ‡¶§‡ßã‡¶Æ‡¶æ‡¶ï‡ßá ‡¶õ‡¶æ‡ßú‡¶æ ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶® ‡¶ï‡¶æ‡¶ü‡ßá ‡¶®‡¶æ‡•§ ‡¶§‡ßã‡¶Æ‡¶æ‡¶ï‡ßá ‡¶≠‡¶æ‡¶¨‡¶≤‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶Æ‡ßÅ‡¶ñ‡ßá ‡¶π‡¶æ‡¶∏‡¶ø ‡¶´‡ßÅ‡¶ü‡ßá ‡¶ì‡¶†‡ßá‡•§ ${userData.name}, ‡¶§‡ßÅ‡¶Æ‡¶ø‡¶á ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶®‡ßç‡¶§‡¶ø, ‡¶§‡ßÅ‡¶Æ‡¶ø‡¶á ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶∏‡¶¨‡•§ ‚ù§Ô∏è ‚Äî ‡¶∏‡¶æ‡¶¨‡ßç‡¶¨‡¶ø‡¶∞ 
`;
            
            container.innerHTML = "";
            let i = 0;

            function type() {
                if(i < msg.length) {
                    const char = msg.charAt(i);
                    container.innerHTML += char;
                    i++;
                    
                    // Human-like pauses
                    let speed = Math.random() * 50 + 40;
                    if([',', '‡•§', '.', '‚Äî'].includes(char)) speed += 400; 
                    
                    setTimeout(type, speed);
                } else {
                    document.querySelector(".cursor").style.display = "none";
                    btn.style.opacity = "1";
                    btn.style.pointerEvents = "all";
                }
            }
            setTimeout(type, 500);
        }

        // === 5. SMART PHYSICS BUTTON (RUNAWAY) ===
        function initSmartButton() {
            const btn = document.getElementById("no-btn");
            const moveBtn = (e) => {
                e.preventDefault();
                // Calculate random position within constraints
                const x = (Math.random() * 200) - 100;
                const y = (Math.random() * 100) - 50;
                const rot = (Math.random() * 30) - 15;
                
                btn.style.transform = `translate(${x}px, ${y}px) rotate(${rot}deg)`;
                btn.style.background = "rgba(255,255,255,0.05)";
            };
            btn.addEventListener("touchstart", moveBtn);
            btn.addEventListener("mouseover", moveBtn);
        }

        // === 6. CELEBRATION ===
        function handleYes() {
            triggerHaptic([50, 50, 100]);
            nextStep(8);
        }

        function sendWhatsApp() {
            const text = `Hi Sabbir! ‚ù§Ô∏è I Love You too! ‡¶Ü‡¶Æ‡¶ø ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡¶æ‡¶¨ ‡¶ó‡ßç‡¶∞‡¶π‡¶£ ‡¶ï‡¶∞‡¶≤‡¶æ‡¶Æ! (From: ${userData.name}) üíç`;
            window.location.href = `https://wa.me/${CONFIG.whatsapp}?text=${encodeURIComponent(text)}`;
        }

        function triggerHaptic(pattern) {
            if(navigator.vibrate) navigator.vibrate(pattern);
        }

        // === 7. 3D TILT & PARTICLE SYSTEM ===
        const card = document.getElementById("main-interface");
        document.addEventListener("mousemove", (e) => {
            if(card.style.display === 'block') {
                const x = (window.innerWidth / 2 - e.pageX) / 30;
                const y = (window.innerHeight / 2 - e.pageY) / 30;
                card.style.transform = `rotateY(${x}deg) rotateX(${y}deg)`;
            }
        });

        // Canvas Particles (Background & Celebration)
        const canvas = document.getElementById("particle-canvas");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        const particles = [];
        class Particle {
            constructor(type) {
                this.x = Math.random() * canvas.width;
                this.y = type === 'balloon' ? canvas.height + 50 : Math.random() * canvas.height;
                this.size = type === 'balloon' ? Math.random() * 15 + 10 : Math.random() * 3 + 1;
                this.speedY = type === 'balloon' ? -(Math.random()*2+1) : (Math.random()*1 - 0.5);
                this.type = type;
                this.color = `hsl(${Math.random()*360}, 70%, 60%)`;
                this.alpha = Math.random() * 0.5 + 0.3;
            }
            update() {
                this.y += this.speedY;
                if(this.type !== 'balloon') {
                    this.x += Math.random() * 1 - 0.5;
                    if(this.y < 0) this.y = canvas.height;
                    if(this.y > canvas.height) this.y = 0;
                }
            }
            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                if(this.type === 'balloon') {
                    // Draw Balloon
                    ctx.ellipse(this.x, this.y, this.size*0.8, this.size, 0, 0, Math.PI*2);
                    ctx.fill();
                    // Balloon String
                    ctx.beginPath();
                    ctx.moveTo(this.x, this.y + this.size);
                    ctx.lineTo(this.x, this.y + this.size + 15);
                    ctx.strokeStyle = "rgba(255,255,255,0.3)";
                    ctx.stroke();
                } else {
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
                    ctx.fill();
                }
                ctx.restore();
            }
        }
        
        // Init Background
        for(let i=0; i<60; i++) particles.push(new Particle('dot'));

        function animate() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            particles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animate);
        }
        animate();

        function startCelebration() {
            // Spawn Balloons
            for(let i=0; i<30; i++) {
                setTimeout(() => particles.push(new Particle('balloon')), i * 100);
            }
        }

        // Add CSS Keyframes via JS
        const style = document.createElement('style');
        style.innerHTML = `@keyframes heartbeat { 0% {transform: scale(1);} 15% {transform: scale(1.3);} 30% {transform: scale(1);} 45% {transform: scale(1.15);} 60% {transform: scale(1);} }`;
        document.head.appendChild(style);

    </script>
</body>
</html>
